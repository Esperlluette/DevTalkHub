<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
		<title>
			{% block title %}Welcome!
			{% endblock %}
		</title>
		<style>
			/* Styles pour le mode sombre */
			.dark-mode {
				background-color: #333; /* Exemple de couleur de fond sombre */
				color: #fff; /* Exemple de couleur de texte claire */
			}

			/* Ajoutez d'autres styles spécifiques au mode sombre selon vos besoins */
		</style>
		<!-- Ajoutez le lien vers votre fichier JavaScript -->
		<script src="{{ asset('js/main.js') }}" defer></script>
	</head>
	<body>
		<nav class="navbar navbar-expand-lg bg-primary" data-bs-theme="dark">
			<div class="container-fluid">
				<a class="navbar-brand" href="{{ path('app_home') }}">
					Dev Talk Hub
					{% if is_granted('IS_AUTHENTICATED_FULLY') %}
						<a href="{{ path('app_create_message') }}" class="btn btn-primary mx-2">Créer un message</a>
					{% endif %}
				</a>
				<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarColor01" aria-controls="navbarColor01" aria-expanded="false" aria-label="Toggle navigation">
					<span class="navbar-toggler-icon"></span>
				</button>
				<div class="collapse navbar-collapse" id="navbarColor01">
					<ul
						class="navbar-nav me-auto"><!-- Vos autres éléments de navigation ici -->
					</ul>

					<!-- Boutons de connexion/déconnexion, profil, création de compte -->
					<div class="d-flex">
						{% if is_granted('IS_AUTHENTICATED_FULLY') %}
							{% if is_granted('ROLE_ADMIN') %}
								<a href="{{ path('admin') }}" class="btn btn-warning mx-2">Admin Panel</a>
							{% endif %}
							<a href="{{ path('app_profile') }}" class="btn btn-success mx-2">Profil</a>
							<a href="{{ path('app_logout') }}" class="btn btn-danger">Se déconnecter</a>
						{% else %}
							<a href="{{ path('app_register') }}" class="btn btn-info mx-2">Créer un compte</a>
							<a href="{{ path('app_login') }}" class="btn btn-primary">Se connecter</a>
						{% endif %}
					</div>
					<!-- Switch pour le mode sombre -->
					<div class="form-check form-switch ms-2">
						<input class="form-check-input" type="checkbox" id="darkModeSwitch">
						<label class="form-check-label" for="darkModeSwitch">Mode sombre</label>
					</div>
				</div>
			</div>
		</nav>
		{% block body %}{% endblock %}
		<footer class="bg-light fixed-bottom py-4">
			<div class="container text-center">
				<p>&copy;
					{{ 'now' | date('Y') }}

					Dev Talk Hub. Il est recommandé de lire la section à propos avant d'utiliser ce site</p>
				<ul class="list-inline">
					<li class="list-inline-item">
						<a href="{{path('app_home')}}">Accueil</a>
					</li>
					<li class="list-inline-item">
						<a href="{{path('app_about')}}">À propos</a>
					</li>
				</ul>
			</div>
		</footer>

		<script>
			document.addEventListener('DOMContentLoaded', function () {
const darkModeSwitch = document.getElementById('darkModeSwitch');

// Vérifiez si l'utilisateur a déjà choisi le mode sombre dans une session précédente
const isDarkMode = localStorage.getItem('darkMode') === 'true';

// Mettez à jour le switch en fonction de l'état stocké
darkModeSwitch.checked = isDarkMode;

// Mettez à jour le thème initial
updateTheme(isDarkMode);

darkModeSwitch.addEventListener('change', function () {
const isDarkMode = darkModeSwitch.checked;

// Stockez le choix de l'utilisateur dans le localStorage
localStorage.setItem('darkMode', isDarkMode);

// Mettez à jour le thème
updateTheme(isDarkMode);
});

function updateTheme(isDarkMode) { // Ajoutez ou supprime la classe CSS pour le mode sombre du corps du document
document.body.classList.toggle('dark-mode', isDarkMode);
}
});
		</script>
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
	</body>
</html>
